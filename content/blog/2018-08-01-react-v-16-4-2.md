---
title: "React v16.4.2 : Correctif d'une faille côté serveur"
author: [gaearon]
---

Nous avons détecté une faille mineure pouvant affecter certaines applis qui utilisent ReactDOMServer. Afin que vous puissiez mettre à niveau React sans problèmes, nous mettons en place un correctif pour chaque version de React concernée. Continuez à lire pour plus de détails.

## Brève description {#short-description}

Aujourd'hui, nous lançons le correctif de la faille dans l'implémentation de `react-dom/server`. Celui-ci a été présenté avec la version 16.0.0 et est présent sur toutes les versions jusqu'à ce jour.

Cette faille **ne s'applique qu'à certaines applis React rendues côté serveur.** Elle ne concerne pas les applis purement rendues côté client. De plus, nous nous attendons à ce que cette faille ne s'applique pas à la plupart des applis rendues côté serveur. Néanmoins, nous vous recommandons tout de même de suivre les mesures d'atténuation dans les plus brefs délais.

Lors de notre enquête, nous avons trouvé des failles similaires sur d'autres bibliothèques front-end populaires. Nous avons donc planifié ensemble la sortie de cette version avec celles de [Vue](https://github.com/vuejs/vue/releases/tag/v2.5.17) et de [Preact](https://github.com/developit/preact-render-to-string/releases/tag/3.7.1), qui résolvent le même problème. Le numéro de suivi de cette faille est le `CVE-2018-6341`.

## Mesures d'atténuation {#mitigation}

**Nous avons préparé une version avec un correctif pour chaque version mineure concernée.**

### 16.0.x {#160x}

Si vous utilisez `react-dom/server` avec cette version :

- `react-dom@16.0.0`

Mettez à jour cette version à la place :

`react-dom@16.0.1` **(contient la mesure d'atténuation)**

### 16.1.x {#161x}

Si vous utilisez `react-dom/server` avec une de ces versions :

- `react-dom@16.1.0`
- `react-dom@16.1.1`

Mettez à jour cette version à la place :

- `react-dom@16.1.2` **(contient la mesure d'atténuation)**

### 16.2.x {#162x}

Si vous utilisez `react-dom/server` avec cette version :

- `react-dom@16.2.0`

Mettez à jour cette version à la place :

- `react-dom@16.2.1` **(contient la mesure d'atténuation)**

### 16.3.x {#163x}

Si vous utilisez `react-dom/server` avec une de ces versions :

- `react-dom@16.3.0`
- `react-dom@16.3.1`
- `react-dom@16.3.2`

Mettez à jour cette version à la place :

- `react-dom@16.3.3` **(contient la mesure d'atténuation)**

### 16.4.x {#164x}

Si vous utilisez `react-dom/server` avec une de ces versions :

- `react-dom@16.4.0`
- `react-dom@16.4.1`

Mettez à jour cette version à la place :

- `react-dom@16.4.2` **(contient la mesure d'atténuation)**

Si vous utilisez une version plus récente de `react-dom`, aucune action n'est requise.

À noter que seul le paquet `react-dom` a besoin d'être mis à jour.

## Description détaillée {#detailed-description}

Votre application ne peut être concernée par cette faille uniquement si ces deux conditions sont réunies :

* Le rendu HTML de votre appli **utilise [ReactDOMServer API](/docs/react-dom-server.html)**, et
* Votre appli **inclut le nom d'un attribut fourni par l'utilisateur dans une balise HTML.**

Plus précisément, le schéma de la faille ressemble à ceci :

```js{2}
let props = {};
props[userProvidedData] = "bonjour";
let element = <div {...props} />;
let html = ReactDOMServer.renderToString(element);
```

Afin de l'exploiter, l'attaquant devra créer un nom spécifique d'attribut qui enclenchera une faille [XSS](https://en.wikipedia.org/wiki/Cross-site_scripting). Par exemple : 

```js
let userProvidedData = '></div><script>alert("salut")</script>';
```

Sur les versions vulnérables de `react-dom/server`, le résultat laisse à l'attaquant la possibilité d'injecter un balisage arbitraire :

```html
<div ></div><script>alert("hi")</script>
```

Sur les versions postérieures au [correctif](https://github.com/facebook/react/pull/13302) (et avant qu'il ne soit présenté), les attributs ayant des noms invalides sont ignorés :

```html
<div></div>
```

Vous pouvez aussi voir une alerte concernant un nom invalide d'attribut.

Veuillez noter qu'en pratique, **nous nous attendons à ce que les noms d'attribut basés sur la saisie de l'utilisateur soient très rares.**

## Installation {#installation}

React v16.4.2 est disponible sur le registre npm.

Pour installer React 16 avec Yarn, exécutez :

```bash
yarn add react@^16.4.2 react-dom@^16.4.2
```

Pour installer React 16 avec npm, exécutez :

```bash
npm install --save react@^16.4.2 react-dom@^16.4.2
```

Nous fournissons des *builds* UMD de React via un CDN :

```html
<script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
```

Pour plus de détails sur l'installation, veuillez consulter ces [instructions](/docs/installation.html).

## Journal des modifications {#changelog}

### React DOM Server {#react-dom-server}

* Correction d'une potentielle faille XSS quand l'attaquant contrôle le nom d'un attribut (`CVE-2018-6341`). Ce correctif est disponible sur `react-dom@16.4.2`, ainsi que sur les précédentes versions mineures concernées par la faille : `react-dom@16.0.1`, `react-dom@16.1.2`, `react-dom@16.2.1`, et `react-dom@16.3.3`. ([@gaearon](https://github.com/gaearon) sur [#13302](https://github.com/facebook/react/pull/13302))

* Correction d'un plantage du moteur de rendu lorsqu'un attribut est appelé `hasOwnProperty`. Ce correctif est seulement disponible sur `react-dom@16.4.2`. ([@gaearon](https://github.com/gaearon) sur [#13303](https://github.com/facebook/react/pull/13303))
